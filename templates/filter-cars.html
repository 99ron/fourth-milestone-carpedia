{% extends 'base.html' %} {% block content %}

<div class="row">
    <div class="col s12">

        <h1 class="center-align">Filter Vehicles</h1>

        <p>This page is upto you on what to filter below. If no filter is applied then everything from the database will be shown.</p>
        <p>The results below displayed below: </p>

        {% with messages = get_flashed_messages() %} {% if messages %}
        <div class="flash-message">
            {% for message in messages %}
            <li>
                <h4>{{ message }}</h4>
            </li>
            {% endfor %}
        </div>
        {% endif %} {% endwith %}
    </div>
    
    <form class="col s12 text-colour-sec center-align" action="/filter-cars" method="POST">
        {{ form.csrf_token }}
        <div class="row">
            <div class="center-align">
                <div class="row">
                    <div class="input-field col s12 m4">
                        {{ form.region.label }}<br> {{ form.region }}
                    </div>
                    <div class="input-field col s12 m4">
                        {{ form.drive.label }}<br> {{ form.drive }}
                    </div>
                    <div class="submit col s12 m4">
                        <br>{{ form.submit(class='col s12 btn btn-large waves-effect blue lighten-1') }}
                    </div>
    
                </div>
            </div>
        </div>
    </form>
    
    
    {% for car in cars %}
    <div class="col s12 m12 l12 xl6">
    
        <div class="z-depth-3 grey lighten-4 box-padding">
            <div class="container">
                <div class="row">
                    <div class="col s12 summary-images z-depth-2">
                        {% if car.img_url %}
                            <img src= {{ car.img_url }} >
                        {% else %}
                            <img src="/static/images/vehicles/no_img.jpg"> 
                        {% endif %}
                    </div>
                
                    <div class="col s12 summary-make-model center">
                        <h4>{{ car.make }} {{ car.model }}</h4>
                    </div>
                
                    <div class="col s6 summary-year center">
                        <p>Year: 
                        {{ car.model_year }}
                        </p>
                    </div>
                    
                    <div class="col s6 summary-trans center">
                        <p>Transmission:<br>
                        {{ car.trans }} 
                        </p>
                    </div>
                    
                    <div class="col s6 summary-drive center">
                        <p>Drivetrain: 
                        {{ car.drivetrain }}
                        </p>
                    </div>
                    
                    <div class="col s6 summary-chassy center">
                        <p>Body Type: <br>
                        {{ car.chassy_desc }}</p>
                    </div>
                    
                    <div class="col s6 summary-hp center">
                        <p>HP: 
                        {{ car.hp_amount }} BHP</p>
                    </div>
                    
                    <div class="col s6 summary-torque center">
                        <p>Torque: 
                        {{ car.torque_amount }} lb-ft</p>
                    </div>
                    
                    <div class="col s12 summary-more-info center">
                        <a href="{{url_for('vehicleInfo', car_id=car.id, vehicleName=car.model)}}" class="waves-effect waves-light btn blue"><i class="material-icons right">description</i>More Info</a>
                    </div>
                </div>
            </div>
        </div>
    
    </div>
    {% else %}
        <div class="col s12">
            <div class="z-depth-3 grey lighten-4 row form-padding">
                <div class="container">
                    <div class="row">
                       <h3 class="filter-no-results center-align">No Results for this Criteria!</h3>
                    </div>
                </div>
            </div>
        
        </div>
    {% endfor %}
    </div>
    {% endblock %}
    